{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\sahil\\\\Programming\\\\Django\\\\Project 2\\\\frontend\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef } from 'react';\nimport './App.css'; // You can keep or modify the existing CSS file\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const [videoStream, setVideoStream] = useState(null);\n  const videoRef = useRef(null);\n  const canvasRef = useRef(null);\n  const nameInputRef = useRef(null);\n  const initWebcam = () => {\n    stopWebcam();\n    navigator.mediaDevices.getUserMedia({\n      video: true\n    }).then(stream => {\n      setVideoStream(stream);\n      videoRef.current.srcObject = stream;\n    }).catch(handleWebcamError);\n  };\n  const handleWebcamError = error => {\n    console.error('Error accessing webcam:', error.name, error.message);\n    alert('Cannot access webcam. Please grant permission.');\n  };\n  const stopWebcam = () => {\n    if (videoStream) {\n      const tracks = videoStream.getTracks();\n      tracks.forEach(track => track.stop());\n      setVideoStream(null);\n      videoRef.current.srcObject = null;\n    }\n  };\n  const capture = () => {\n    const context = canvasRef.current.getContext('2d');\n    context.drawImage(videoRef.current, 0, 0, canvasRef.current.width, canvasRef.current.height);\n    canvasRef.current.style.display = 'block';\n    videoRef.current.style.display = 'none';\n  };\n  const register = () => {\n    const name = nameInputRef.current.value;\n    const photo = dataURItoBlob(canvasRef.current.toDataURL());\n    if (!name || !photo) {\n      alert('Name and photo required');\n      return;\n    }\n    const formData = new FormData();\n    formData.append('name', name);\n    formData.append('photo', photo, `${name}.jpg`);\n    fetch('/register', {\n      method: 'POST',\n      body: formData\n    }).then(response => response.json()).then(data => {\n      if (data.success) {\n        alert('Data successfully registered');\n        window.location.href = '/';\n      } else {\n        alert('Failed');\n      }\n    }).catch(error => {\n      console.error('Error:', error);\n    });\n  };\n  const login = () => {\n    const photo = dataURItoBlob(canvasRef.current.toDataURL());\n    if (!photo) {\n      alert('Photo required');\n      return;\n    }\n    const formData = new FormData();\n    formData.append('photo', photo, 'login.jpg');\n    fetch('/login', {\n      method: 'POST',\n      body: formData\n    }).then(response => response.json()).then(data => {\n      console.log(data);\n      if (data.success) {\n        alert('Login successful');\n        window.location.href = '/success?user_name=' + nameInputRef.current.value;\n      } else {\n        alert('Failed');\n      }\n    }).catch(error => {\n      console.error('Error:', error);\n    });\n  };\n  const dataURItoBlob = dataURI => {\n    const byteString = atob(dataURI.split(',')[1]);\n    const mimeString = dataURI.split(',')[0].split(':')[1].split(';')[0];\n    const ab = new ArrayBuffer(byteString.length);\n    const ia = new Uint8Array(ab);\n    for (let i = 0; i < byteString.length; i++) {\n      ia[i] = byteString.charCodeAt(i);\n    }\n    return new Blob([ab], {\n      type: mimeString\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(\"video\", {\n      ref: videoRef,\n      autoPlay: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n      ref: canvasRef,\n      width: \"640\",\n      height: \"480\",\n      style: {\n        display: 'none'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      placeholder: \"Name\",\n      ref: nameInputRef\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: initWebcam,\n      children: \"Init Webcam\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: capture,\n      children: \"Capture\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: register,\n      children: \"Register\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: login,\n      children: \"Login\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 115,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"vCwAV/YQAnmkMUqnwj+xxTgRiAQ=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useRef","jsxDEV","_jsxDEV","App","_s","videoStream","setVideoStream","videoRef","canvasRef","nameInputRef","initWebcam","stopWebcam","navigator","mediaDevices","getUserMedia","video","then","stream","current","srcObject","catch","handleWebcamError","error","console","name","message","alert","tracks","getTracks","forEach","track","stop","capture","context","getContext","drawImage","width","height","style","display","register","value","photo","dataURItoBlob","toDataURL","formData","FormData","append","fetch","method","body","response","json","data","success","window","location","href","login","log","dataURI","byteString","atob","split","mimeString","ab","ArrayBuffer","length","ia","Uint8Array","i","charCodeAt","Blob","type","className","children","ref","autoPlay","fileName","_jsxFileName","lineNumber","columnNumber","placeholder","onClick","_c","$RefreshReg$"],"sources":["C:/Users/sahil/Programming/Django/Project 2/frontend/src/App.js"],"sourcesContent":["import React, { useState, useRef } from 'react';\nimport './App.css'; // You can keep or modify the existing CSS file\n\nfunction App() {\n  const [videoStream, setVideoStream] = useState(null);\n  const videoRef = useRef(null);\n  const canvasRef = useRef(null);\n  const nameInputRef = useRef(null);\n\n  const initWebcam = () => {\n    stopWebcam();\n\n    navigator.mediaDevices.getUserMedia({ video: true })\n      .then(stream => {\n        setVideoStream(stream);\n        videoRef.current.srcObject = stream;\n      })\n      .catch(handleWebcamError);\n  };\n\n  const handleWebcamError = (error) => {\n    console.error('Error accessing webcam:', error.name, error.message);\n    alert('Cannot access webcam. Please grant permission.');\n  };\n\n  const stopWebcam = () => {\n    if (videoStream) {\n      const tracks = videoStream.getTracks();\n      tracks.forEach(track => track.stop());\n      setVideoStream(null);\n      videoRef.current.srcObject = null;\n    }\n  };\n\n  const capture = () => {\n    const context = canvasRef.current.getContext('2d');\n    context.drawImage(videoRef.current, 0, 0, canvasRef.current.width, canvasRef.current.height);\n    canvasRef.current.style.display = 'block';\n    videoRef.current.style.display = 'none';\n  };\n\n  const register = () => {\n    const name = nameInputRef.current.value;\n    const photo = dataURItoBlob(canvasRef.current.toDataURL());\n\n    if (!name || !photo) {\n      alert('Name and photo required');\n      return;\n    }\n\n    const formData = new FormData();\n    formData.append('name', name);\n    formData.append('photo', photo, `${name}.jpg`);\n\n    fetch('/register', {\n      method: 'POST',\n      body: formData\n    })\n      .then(response => response.json())\n      .then(data => {\n        if (data.success) {\n          alert('Data successfully registered');\n          window.location.href = '/';\n        } else {\n          alert('Failed');\n        }\n      })\n      .catch(error => {\n        console.error('Error:', error);\n      });\n  };\n\n  const login = () => {\n    const photo = dataURItoBlob(canvasRef.current.toDataURL());\n\n    if (!photo) {\n      alert('Photo required');\n      return;\n    }\n\n    const formData = new FormData();\n    formData.append('photo', photo, 'login.jpg');\n\n    fetch('/login', {\n      method: 'POST',\n      body: formData\n    })\n      .then(response => response.json())\n      .then(data => {\n        console.log(data);\n        if (data.success) {\n          alert('Login successful');\n          window.location.href = '/success?user_name=' + nameInputRef.current.value;\n        } else {\n          alert('Failed');\n        }\n      })\n      .catch(error => {\n        console.error('Error:', error);\n      });\n  };\n\n  const dataURItoBlob = (dataURI) => {\n    const byteString = atob(dataURI.split(',')[1]);\n    const mimeString = dataURI.split(',')[0].split(':')[1].split(';')[0];\n    const ab = new ArrayBuffer(byteString.length);\n    const ia = new Uint8Array(ab);\n    for (let i = 0; i < byteString.length; i++) {\n      ia[i] = byteString.charCodeAt(i);\n    }\n    return new Blob([ab], { type: mimeString });\n  };\n\n  return (\n    <div className=\"App\">\n      <video ref={videoRef} autoPlay />\n      <canvas ref={canvasRef} width=\"640\" height=\"480\" style={{ display: 'none' }} />\n      <input type=\"text\" placeholder=\"Name\" ref={nameInputRef} />\n      <button onClick={initWebcam}>Init Webcam</button>\n      <button onClick={capture}>Capture</button>\n      <button onClick={register}>Register</button>\n      <button onClick={login}>Login</button>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}